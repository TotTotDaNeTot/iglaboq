{% extends "admin/base.html" %}

{% block content %}
<div class="container-fluid">
    <h2 class="mt-4">Add New Journal</h2>
    
    <!-- БЛОК ДЛЯ ОТОБРАЖЕНИЯ ОШИБОК -->
    {% if error %}
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        {{ error }}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    {% endif %}
    
    <div class="row mt-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <form method="POST">
                        
                        <div class="mb-3">
                            <label for="journal_id" class="form-label">Journal ID*</label>
                            <input type="number" class="form-control {% if error and form_data.journal_id %}is-invalid{% endif %}" 
                                   id="journal_id" name="journal_id" required min="1"
                                   placeholder="Enter unique journal ID"
                                   value="{{ form_data.journal_id if form_data else '' }}">
                            <small class="text-muted">Must be a unique number</small>
                            {% if error and form_data.journal_id %}
                            <div class="invalid-feedback">
                                Этот ID уже занят!
                            </div>
                            {% endif %}
                        </div>
                        
                        <div class="mb-3">
                            <label for="title" class="form-label">Title*</label>
                            <input type="text" class="form-control" id="title" name="title" required
                                   value="{{ form_data.title if form_data else '' }}">
                        </div>
                        
                        <div class="mb-3">
                            <label for="year" class="form-label">Year*</label>
                            <input type="number" class="form-control" id="year" name="year" 
                                   min="1900" max="{{ current_year + 5 }}" 
                                   value="{{ form_data.year if form_data else current_year }}" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="price" class="form-label">Price</label>
                            <input type="number" step="0.01" class="form-control" 
                                   id="price" name="price" 
                                   value="{{ form_data.price if form_data else '0.00' }}">
                        </div>
                        
                        <div class="mb-3">
                            <label for="quantity" class="form-label">Quantity*</label>
                            <input type="number" class="form-control" id="quantity" 
                                   name="quantity" required min="0" 
                                   value="{{ form_data.quantity if form_data else '0' }}">
                            <small class="text-muted">Initial quantity in stock</small>
                        </div>
                        
                        <div class="mb-3">
                            <label for="description" class="form-label">Description</label>
                            <textarea class="form-control" id="description" name="description" rows="5">{{ form_data.description if form_data else '' }}</textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">Add Journal</button>
                        <a href="/journal" class="btn btn-secondary">Cancel</a>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}